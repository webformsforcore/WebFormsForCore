Type.registerNamespace("Microsoft.Reporting.WebFormsClient"),Microsoft.Reporting.WebFormsClient._BrowserNavigationCorrector=function(n){Microsoft.Reporting.WebFormsClient._BrowserNavigationCorrector.initializeBase(this,[n]),this._PageStateLoaded="Loaded",this._PageStateNeedsCorrection="NeedsCorrection",this.HiddenScrollPositionId=null,this.HiddenViewStateId=null,this.HiddenNewViewStateId=null,this.ReportViewerId=null,this.PageStateId=null,this.TriggerPostBack=null,this.m_needHookViewerEvents=!0,this.m_shouldApplyStoredScrollPosition=!1,this.m_onAppLoadDelegate=Function.createDelegate(this,this.OnAppLoad),this.m_onAsyncPostBackLoadingDelegate=Function.createDelegate(this,this.OnAsyncPostBackLoading),this.m_onAsyncPostBackEndedDelegate=Function.createDelegate(this,this.OnAsyncPostBackEnded),this.m_onViewerDisposingDelegate=Function.createDelegate(this,this.OnViewerDisposing),this.m_onViewerScrollChangeDelegate=Function.createDelegate(this,this.OnReportViewerScrollChange),this.m_onViewerLoadingChangeDelegate=Function.createDelegate(this,this.OnViewerLoadingChange)},Microsoft.Reporting.WebFormsClient._BrowserNavigationCorrector.prototype={initialize:function(){Microsoft.Reporting.WebFormsClient._BrowserNavigationCorrector.callBaseMethod(this,"initialize"),Sys.Application.add_load(this.m_onAppLoadDelegate);var n=Sys.WebForms.PageRequestManager.getInstance();n.add_endRequest(this.m_onAsyncPostBackEndedDelegate),n.add_pageLoading(this.m_onAsyncPostBackLoadingDelegate)},dispose:function(){if(Microsoft.Reporting.WebFormsClient._BrowserNavigationCorrector.callBaseMethod(this,"dispose"),this.m_onAppLoadDelegate!=null&&(Sys.Application.remove_load(this.m_onAppLoadDelegate),delete this.m_onAppLoadDelegate,this.m_onAppLoadDelegate=null),this.m_onAsyncPostBackEndedDelegate!=null){var n=Sys.WebForms.PageRequestManager.getInstance();n.remove_beginRequest(this.m_onAsyncPostBackLoadingDelegate),n.remove_endRequest(this.m_onAsyncPostBackEndedDelegate),delete this.m_onAsyncPostBackEndedDelegate,this.m_onAsyncPostBackEndedDelegate=null,delete this.m_onAsyncPostBackLoadingDelegate,this.m_onAsyncPostBackLoadingDelegate=null}delete this.m_onViewerDisposingDelegate,this.m_onViewerDisposingDelegate=null,delete this.m_onViewerScrollChangeDelegate,this.m_onViewerScrollChangeDelegate=null,delete this.m_onViewerLoadingChangeDelegate,this.m_onViewerLoadingChangeDelegate=null},OnAppLoad:function(){var r=this._PageStateLoaded,t=!1,i=$get(this.PageStateId),u,n;i.value===this._PageStateLoaded?(u=$get(this.HiddenViewStateId).value,u.length>0?(r=this._PageStateNeedsCorrection,setTimeout(this.TriggerPostBack,0)):t=!0):i.value===this._PageStateNeedsCorrection&&(t=!0),t&&(this.m_shouldApplyStoredScrollPosition=!0),this.m_needHookViewerEvents&&(n=$find(this.ReportViewerId),n.add_disposing(this.m_onViewerDisposingDelegate),n.add_propertyChanged(this.m_onViewerScrollChangeDelegate),n.add_propertyChanged(this.m_onViewerLoadingChangeDelegate),this.m_needHookViewerEvents=!1),i.value=r},OnAsyncPostBackEnded:function(){var n=$get(this.HiddenNewViewStateId),t=$get(this.HiddenViewStateId);t.value=n.value},OnViewerLoadingChange:function(n,t){var i=$find(this.ReportViewerId),r,u,f;this.m_shouldApplyStoredScrollPosition&&!i.get_isLoading()&&i.get_reportAreaContentType()==Microsoft.Reporting.WebFormsClient.ReportAreaContent.ReportPage&&t.get_propertyName()=="isLoading"&&(r=$get(this.HiddenScrollPositionId).value,r.length>0&&(u=r.split(" "),f=new Sys.UI.Point(parseInt(u[0]),parseInt(u[1])),i.set_reportAreaScrollPosition(f)),this.m_shouldApplyStoredScrollPosition=!1)},OnReportViewerScrollChange:function(n,t){var i=$find(this.ReportViewerId),r,u;i.get_isLoading()||i.get_reportAreaContentType()!=Microsoft.Reporting.WebFormsClient.ReportAreaContent.ReportPage||t.get_propertyName()!="reportAreaScrollPosition"||(r=i.get_reportAreaScrollPosition(),u=$get(this.HiddenScrollPositionId),u.value=r.x+" "+r.y)},OnViewerDisposing:function(){this.m_needHookViewerEvents=!0},OnAsyncPostBackLoading:function(){var n=$get(this.PageStateId);n.value==this._PageStateLoaded&&(n.value="",this.m_shouldApplyStoredScrollPosition=!1)}},Microsoft.Reporting.WebFormsClient._BrowserNavigationCorrector.registerClass("Microsoft.Reporting.WebFormsClient._BrowserNavigationCorrector",Sys.UI.Control);