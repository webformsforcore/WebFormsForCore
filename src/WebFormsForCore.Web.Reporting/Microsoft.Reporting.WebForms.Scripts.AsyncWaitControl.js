Type.registerNamespace("Microsoft.Reporting.WebFormsClient"),Microsoft.Reporting.WebFormsClient._AsyncWaitControl=function(n){Microsoft.Reporting.WebFormsClient._AsyncWaitControl.initializeBase(this,[n]),this.ReportViewerId=null,this.WaitControlId=null,this.FixedTableId=null,this.ClientCanceledId=null,this.DisplayDelay=0,this.SkipTimer=!1,this._postBackElement=null,this.m_triggerIds=null,this.m_delayTimerCompletedDelegate=Function.createDelegate(this,this._onDelayStartTimerCompleted),this.m_onReportViewerLoadingChangedDelegate=Function.createDelegate(this,this._onReportViewerLoadingChanged),this.m_onPageRequestBeginRequestDelegate=Function.createDelegate(this,this._onPageRequestBeginRequest),this.m_onPageRequestEndRequestDelegate=Function.createDelegate(this,this._onPageRequestEndRequest),this.m_visiblePollingTimer=null,this.m_delayTimer=null,this.m_waitControl=null,this.m_reportViewer,this.m_reallyCanceled=!1,this.m_waitVisible=!1,this.m_transVisible=!1},Microsoft.Reporting.WebFormsClient._AsyncWaitControl.prototype={initialize:function(){if(Microsoft.Reporting.WebFormsClient._AsyncWaitControl.callBaseMethod(this,"initialize"),this.ReportViewerId){this.m_reportViewer=$find(this.ReportViewerId),this.m_reportViewer!=null&&this.m_reportViewer.add_propertyChanged(this.m_onReportViewerLoadingChangedDelegate);var n=this._getPageRequestManager();n&&(n.add_beginRequest(this.m_onPageRequestBeginRequestDelegate),n.add_endRequest(this.m_onPageRequestEndRequestDelegate)),this.m_waitControl=$get(this.WaitControlId)}},get_TriggerIds:function(){return this.m_triggerIds},set_TriggerIds:function(n){this.m_triggerIds=n},dispose:function(){this.m_onReportViewerLoadingChangedDelegate&&(this.m_reportViewer.remove_propertyChanged(this.m_onReportViewerLoadingChangedDelegate),this.m_onReportViewerLoadingChangedDelegate=null,delete this.m_onReportViewerLoadingChangedDelegate);var n=this._getPageRequestManager();n&&(n.remove_beginRequest(this.m_onPageRequestBeginRequestDelegate),n.remove_endRequest(this.m_onPageRequestEndRequestDelegate)),this.m_onPageRequestBeginRequestDelegate&&(this.m_onPageRequestBeginRequestDelegate=null,delete this.m_onPageRequestBeginRequestDelegate),this._clearPollingTimer(),this._clearDelayTimer(),delete this.m_delayTimerCompletedDelegate,Microsoft.Reporting.WebFormsClient._AsyncWaitControl.callBaseMethod(this,"dispose")},_getPageRequestManager:function(){return Sys.WebForms&&Sys.WebForms.PageRequestManager?Sys.WebForms.PageRequestManager.getInstance():null},_cancelCurrentPostback:function(){var n,t;this.m_reallyCanceled=!0,n=this._getPageRequestManager(),n&&n.get_isInAsyncPostBack()?(n.abortPostBack(),this._triggeringControlWasForThisViewer()&&this._triggeringControlWasAsyncLoadTarget()&&(t=$get(this.ClientCanceledId),t.value="true")):this._cancelReportViewerLoading()},_cancelReportViewerLoading:function(){var n=this.m_reportViewer._tryGetInternalViewer();if(n==null)throw Error.invalidOperation("Unexpected error: InternalViewer unavailable for calling OnUserCanceled.");n.OnUserCanceled()},_onPageRequestBeginRequest:function(n,t){this._postBackElement=t.get_postBackElement(),this.m_reallyCanceled=!1},_onPageRequestEndRequest:function(n,t){!t.get_response().get_aborted()&&this.m_reallyCanceled&&this._cancelReportViewerLoading()},_clearDelayTimer:function(){this.m_delayTimer!=null&&(clearTimeout(this.m_delayTimer),this.m_delayTimer=null)},_clearPollingTimer:function(){this.m_visiblePollingTimer!=null&&(clearTimeout(this.m_visiblePollingTimer),this.m_visiblePollingTimer=null)},_triggeringControlWasAsyncLoadTarget:function(){var n=this._postBackElement;return n&&n.id.indexOf("Reserved_AsyncLoadTarget")>=0?!0:!1},_areRelated:function(n,t){return n&&t&&(n==t||_$RVCommon.getPostBackTargetElementById(t.id,n))},_triggeringControlWasForThisViewer:function(){var i=this._postBackElement,t,n,r;if(i)for(t=this.get_TriggerIds(),n=0;n<t.length;++n)if(r=$get(t[n]),this._areRelated(r,i))return!0;return!1},_onReportViewerLoadingChanged:function(n,t){var i,r;t.get_propertyName()=="isLoading"&&(i=this.m_reportViewer.get_isLoading(),i?this.SkipTimer?(this.SkipTimer=!1,this._onDelayStartTimerCompleted()):this.m_delayTimer=setTimeout(this.m_delayTimerCompletedDelegate,this.DisplayDelay):(r=Microsoft.Reporting.WebFormsClient._ReportAreaAsyncLoadTarget.AsyncTriggerSelected==!0,this.set_visible(r,!1),this._clearDelayTimer(),this._clearPollingTimer()))},_onDelayStartTimerCompleted:function(){this.set_visible(!0,this._triggeringControlWasForThisViewer())},set_visible:function(n,t){this.m_transVisible=n,this.m_waitVisible=t,this._start_visibility_polling()},_start_visibility_polling:function(){if(this._set_visible_core(),this.m_reportViewer.get_isLoading()){var n=200;this.m_visiblePollingTimer=setTimeout(Function.createDelegate(this,this._start_visibility_polling),n)}},_set_visible_core:function(){var r=this.m_transVisible,f=this.m_waitVisible,n=this.get_element(),i=this._getAnchoringParentOffsets(n),t,u;r&&(t=this._getBounds(),n.style.top=t.top-i.top+"px",n.style.left=t.left-i.left+"px",n.style.width=t.width+"px",n.style.height=t.height+"px"),n.style.zIndex=1e3,this.m_waitControl.style.zIndex=1001,Sys.UI.DomElement.setVisible(n,r),Sys.UI.DomElement.setVisible(this.m_waitControl,f),r&&this._clip(n),f&&(u=this._getTopLeftForCenter(this.m_waitControl),this.m_waitControl.style.top=u.top-i.top+"px",this.m_waitControl.style.left=u.left-i.left+"px",this._clip(this.m_waitControl))},_getAnchoringParentOffsets:function(n){var i=0,r=0,t,u,f,e;if(n){for(t=n.parentNode;t&&t.style!=undefined&&!this.HasAnchoringPositionStyle(t);)t=t.parentNode;t&&t.style!=undefined&&(u=_$RVCommon.documentOffset(t),i=u.top,r=u.left),t==document&&(t=document.body),f=_$RVCommon.getInt(_$RVCommon.getComputedStyle(t,"border-top-width")),e=_$RVCommon.getInt(_$RVCommon.getComputedStyle(t,"border-left-width")),t!=document.body||_$RVCommon.isPreIE8StandardsMode()||_$RVCommon.isIEQuirksMode()?t!=document.body&&(i+=f,r+=e):(i-=f,r-=e)}return{top:i,left:r}},HasAnchoringPositionStyle:function(n){var t="",i;return n.currentStyle!=null?t=n.currentStyle.position:window.getComputedStyle!=null&&(i=window.getComputedStyle(n,null),t=i.getPropertyValue("position")),t=="fixed"||t=="absolute"||t=="relative"},_clip:function(n){for(var t=$get(this.ReportViewerId).parentNode.parentNode,i,r;t&&this._hasNoOverflowSet(t);)t=t.parentNode;if(t){i=_$RVCommon.getBounds(t),r=_$RVCommon.getBounds(n),t.scrollWidth>t.clientWidth&&t.style.overflow!="hidden"&&t.style.overflowX!="hidden"&&!_$RVCommon.isSafari()&&(i.height-=18,i.bottom-=18),t.scrollHeight>t.clientHeight&&t.style.overflow!="hidden"&&t.style.overflowY!="hidden"&&!_$RVCommon.isSafari()&&(i.width-=18,i.right-=18);var u=r.top<i.top?i.top-r.top:0,f=r.left<i.left?i.left-r.left:0,e=r.height-(r.bottom-i.bottom),o=r.width-(r.right-i.right),s="rect("+u+"px,"+o+"px,"+e+"px,"+f+"px)";n.style.clip=s}},_hasNoOverflowSet:function(n){return n==null||n.style==undefined||n.style.overflow!="hidden"&&n.style.overflow!="scroll"&&n.style.overflow!="auto"&&n.style.overflowX!="hidden"&&n.style.overflowX!="scroll"&&n.style.overflowX!="auto"&&n.style.overflowY!="hidden"&&n.style.overflowY!="scroll"&&n.style.overflowY!="auto"?!0:!1},_getTopLeftForCenter:function(n){var t=this._getBounds(),r=_$RVCommon.getBounds(n),u=t.top+t.height/2-r.height/2,i=t.left+t.width/2-r.width/2,o=this.m_reportViewer._get_direction()=="rtl",f,e;return o?(f=i+r.width,e=t.left+t.width,f>e&&(i-=f-e)):i<0&&(i=0),u<0&&(u=0),{top:u,left:i}},_getBounds:function(){var n=$get(this.FixedTableId),t=_$RVCommon.documentOffset(n),i=t.top,u=t.left,r=n.rows.item(n.rows.length-1);return i+=n.clientHeight-r.offsetHeight,{left:u,top:i,width:n.clientWidth,height:r.offsetHeight}}},Microsoft.Reporting.WebFormsClient._AsyncWaitControl.registerClass("Microsoft.Reporting.WebFormsClient._AsyncWaitControl",Sys.UI.Control);