Type.registerNamespace("Microsoft.Reporting.WebFormsClient"),Microsoft.Reporting.WebFormsClient._DocMapArea=function(n){Microsoft.Reporting.WebFormsClient._DocMapArea.initializeBase(this,[n]),this.RootNodeId=null,this.SelectedNodeHiddenFieldId=null,this.TriggerPostBack=null,this.IsLTR=!0,this.ReportViewerId=null,this.m_active=!0,this.m_selectedNode=null,this.m_originalTextNodeColor=null,this.m_originalTextNodeBackColor=null},Microsoft.Reporting.WebFormsClient._DocMapArea.prototype={initialize:function(){if(Microsoft.Reporting.WebFormsClient._DocMapArea.callBaseMethod(this,"initialize"),this.RootNodeId!=null){this.SetDirectionForTree();var n=$get(this.RootNodeId),t=this.GetTextNodeFromTreeNode(n);this.m_originalTextNodeColor=t.style.color,this.m_originalTextNodeColor==null&&(this.m_originalTextNodeColor=""),this.m_originalTextNodeBackColor=t.style.backgroundcolor,this.m_originalTextNodeBackColor==null&&(this.m_originalTextNodeBackColor=""),this.MarkNodeAsSelected(n)}},dispose:function(){Microsoft.Reporting.WebFormsClient._DocMapArea.callBaseMethod(this,"dispose"),this.m_selectedTextNode=null},SetActive:function(n){this.m_active=n},ExpandCollapseNode:function(n){var f,r,i,u,t;if(this.m_active){for(f=this.IsNodeExpanded(n),r=n.childNodes,t=0;t<r.length;t++)i=r[t],(i.tagName==="DIV"||i.tagName==="INPUT")&&this.ToggleNodeVisibility(i);if(f)for(u=n.getElementsByTagName("div"),t=0;t<u.length;t++)if(u[t]==this.m_selectedNode){this.MarkNodeAsSelected(n);break}}},IsNodeExpanded:function(n){for(var r=n.childNodes,i,t=0;t<r.length;t++)if(i=r[t],i.tagName==="DIV")return i.style.display!=="none";return!0},IsLeafNode:function(n){var t=n.getElementsByTagName("DIV");return t.length===0},ToggleNodeVisibility:function(n){var t=n.style.display!=="none";_$RVCommon.SetElementVisibility(n,!t)},OnTextNodeEnter:function(n){this.IsTextNodeSelected(n)||(n.style.color="highlighttext",n.style.backgroundColor="highlight")},OnTextNodeLeave:function(n){this.IsTextNodeSelected(n)||(n.style.color=this.m_originalTextNodeColor,n.style.backgroundColor=this.m_originalTextNodeBackColor)},IsTextNodeSelected:function(n){return this.m_selectedNode!=null&&n==this.GetTextNodeFromTreeNode(this.m_selectedNode)},OnAnchorNodeSelected:function(n){this.OnTreeNodeSelected(n.parentNode)},OnTreeNodeSelected:function(n){var t=n.attributes.getNamedItem("DocMapId").value;this.MarkNodeAsSelected(n),$get(this.SelectedNodeHiddenFieldId).value=t,this.TriggerPostBack()},MarkNodeAsSelected:function(n){var t,i;if(this.m_selectedNode!=null&&(t=this.GetTextNodeFromTreeNode(this.m_selectedNode),t.style.color=this.m_originalTextNodeColor,t.style.backgroundColor=this.m_originalTextNodeBackColor,this.m_selectedNode=null),n!=null){this.m_selectedNode=n,t=this.GetTextNodeFromTreeNode(n),t.style.color="highlighttext",t.style.backgroundColor="highlight";try{t.focus(),i=n.offsetParent,i.scrollTop>t.offsetTop?i.scrollTop=t.offsetTop-1:i.scrollTop+i.offsetHeight<t.offsetTop+t.offsetHeight&&(i.scrollTop=t.offsetTop+t.offsetHeight-i.offsetHeight+1)}catch(r){}}},GetTextNodeFromTreeNode:function(n){var t=n.getElementsByTagName("a")[0];return t.getElementsByTagName("span")[0]},SetDirectionForTree:function(){var e=$find(this.ReportViewerId),r=e._get_direction(),u,i,t,n,f;if(r==="ltr"&&!this.IsLTR||r==="rtl"&&this.IsLTR){for(u=this.get_element(),i=u.getElementsByTagName("DIV"),t=0;t<i.length;t++)n=i[t],f=n.style.marginRight,n.style.marginRight=n.style.marginLeft,n.style.marginLeft=f;this.IsLTR=!this.IsLTR}},OnKeyDown:function(n){var e,r,s,h,u,f,c,i,o,t;if(this.m_active&&n.altKey!=!0)switch(n.keyCode){case 187:if(!n.shiftKey)break;case 107:this.IsLeafNode(this.m_selectedNode)||this.IsNodeExpanded(this.m_selectedNode)||this.ExpandCollapseNode(this.m_selectedNode),n.returnValue=!1;break;case 189:if(n.shiftKey)break;case 109:!this.IsLeafNode(this.m_selectedNode)&&this.IsNodeExpanded(this.m_selectedNode)&&this.ExpandCollapseNode(this.m_selectedNode),n.returnValue=!1;break;case Sys.UI.Key.right:n.returnValue=!1,this.IsLeafNode(this.m_selectedNode)||(this.IsNodeExpanded(this.m_selectedNode)?(e=this.m_selectedNode.getElementsByTagName("DIV")[0],this.MarkNodeAsSelected(e)):this.ExpandCollapseNode(this.m_selectedNode));break;case Sys.UI.Key.down:if(!this.IsLeafNode(this.m_selectedNode)&&this.IsNodeExpanded(this.m_selectedNode))e=this.m_selectedNode.getElementsByTagName("DIV")[0],this.MarkNodeAsSelected(e);else for(r=this.m_selectedNode,s=$get(this.RootNodeId);r!=s;){for(h=r,r=r.parentNode,u=r.childNodes,t=0;t<u.length;t++)if(u[t]==h)break;if(t+1<u.length){this.MarkNodeAsSelected(u[t+1]);break}}n.returnValue=!1;break;case Sys.UI.Key.left:this.IsLeafNode(this.m_selectedNode)||!this.IsNodeExpanded(this.m_selectedNode)?this.m_selectedNode!=$get(this.RootNodeId)&&this.MarkNodeAsSelected(this.m_selectedNode.parentNode):this.ExpandCollapseNode(this.m_selectedNode),n.returnValue=!1;break;case Sys.UI.Key.up:if(this.m_selectedNode!=$get(this.RootNodeId)){for(f=this.m_selectedNode.parentNode.childNodes,t=0;t<f.length;t++)if(f[t]==this.m_selectedNode)break;if(t>0&&f[t-1].tagName==="DIV"){for(c=f[t-1],i=c;i!=null&&!this.IsLeafNode(i)&&this.IsNodeExpanded(i);)for(o=i.childNodes,t=o.length-1;t>=0;t--)if(o[t].tagName==="DIV"){i=o[t];break}this.MarkNodeAsSelected(i)}else this.MarkNodeAsSelected(this.m_selectedNode.parentNode)}n.returnValue=!1;break;case Sys.UI.Key.enter:this.OnTreeNodeSelected(this.m_selectedNode),n.returnValue=!1}}},Microsoft.Reporting.WebFormsClient._DocMapArea.registerClass("Microsoft.Reporting.WebFormsClient._DocMapArea",Sys.UI.Control);