Type.registerNamespace("Microsoft.Reporting.WebFormsClient"),Microsoft.Reporting.WebFormsClient._DropDownMenu=function(n){Microsoft.Reporting.WebFormsClient._DropDownMenu.initializeBase(this,[n]),this.NormalStyles=null,this.HoverStyles=null,this.ButtonId=null,this.MenuId=null,this.ButtonImages=null,this.ArrowImages=null,this._Enabled=!1,this._hideMenuDelegate=Function.createDelegate(this,this._hideMenu),this._keyDownDelegate=Function.createDelegate(this,this._onMenuKeyDown),this._button=null,this._buttonLink=null,this._menu=null,this._adorner=null,this._menuItemElements=null,this._selectedItem=null,this._ButtonImages=null,this._ArrowImages=null},Microsoft.Reporting.WebFormsClient._DropDownMenu.prototype={initialize:function(){var r,n,i,t;if(Microsoft.Reporting.WebFormsClient._DropDownMenu.callBaseMethod(this,"initialize"),r=this.get_element(),this._button=$get(this.ButtonId),this._menu=$get(this.MenuId),$addHandlers(this._button,{mouseover:this._onButtonMouseOver,mouseout:this._onButtonMouseOut,click:this._onButtonClick},this),_$RVCommon.setButtonStyle(this._button.parentNode,this._normalStyles,"default"),this._buttonLink=$get(this.ButtonId+"Link"),$addHandlers(this._buttonLink,{click:this._onButtonClick,keydown:this._onButtonKeyDown},this),this._adorner=document.createElement("div"),this._adorner.style.position="absolute",this._adorner.style.zIndex=-1,this._adorner.style.top="0px",this._adorner.style.left="0px",this._adorner.style.width="26px",this._adorner.style.opacity="0.05",this._adorner.style.filter="alpha(opacity=5)",this._adorner.style.backgroundColor="black",this._menu.appendChild(this._adorner),n=this._menu.getElementsByTagName("a"),this._menuItemElements=[],this._selectedItem=null,n.length>0)for(i=this._isRTL(),t=0;t<n.length;t++)$addHandlers(n[t],{mouseover:this._onMenuItemMouseOver,focus:this._onMenuItemMouseOver,click:this._onMenuItemClick},this),i?n[t].style.paddingRight="32px":n[t].style.paddingLeft="32px",this._menuItemElements[this._menuItemElements.length]=n[t];Sys.UI.DomElement.setVisible(this._menu,!1),this._ButtonImages=this._loadImages(this.ButtonImages),this._ArrowImages=this._loadImages(this.ArrowImages)},dispose:function(){$clearHandlers(this._button),$clearHandlers(this._buttonLink),$clearHandlers(this._menu);for(var n=0;n<this._menuItemElements.length;n++)$clearHandlers(this._menuItemElements[n]);delete this._hideMenuDelegate,delete this._keyDownDelegate,this._button=null,this._buttonLink=null,this._menu=null,this._adorner=null,this._menuItemElements=null,this._selectedItem=null,this._ButtonImages=null,this._ArrowImages=null,Microsoft.Reporting.WebFormsClient._DropDownMenu.callBaseMethod(this,"dispose")},set_NormalStyles:function(n){this._normalStyles=n},get_NormalStyles:function(){return this._normalStyles},set_HoverStyles:function(n){this._hoverStyles=n},get_HoverStyles:function(){return this._hoverStyles},_loadImages:function(n){var t=Sys.Serialization.JavaScriptSerializer.deserialize(n);return t._Enabled=document.createElement("img"),t._Enabled.src=t.EnabledUrl,t._Disabled=document.createElement("img"),t._Disabled.src=t.DisabledUrl,t},get_Enabled:function(){return this._Enabled},set_Enabled:function(n){this._ButtonImages?(n?($get(this.ButtonId+"Img").src=this._ButtonImages.EnabledUrl,$get(this.ButtonId+"ImgDown").src=this._ArrowImages.EnabledUrl):($get(this.ButtonId+"Img").src=this._ButtonImages.DisabledUrl,$get(this.ButtonId+"ImgDown").src=this._ArrowImages.DisabledUrl),this._buttonLink.disabled=!(n==!0),this._buttonLink.style.cursor=this._buttonLink.disabled?"default":"pointer",this._hideMenu(null),this._Enabled=n,this.raisePropertyChanged("Enabled")):this._Enabled=n},SetActive:function(n){this.set_Enabled(n)},_onButtonMouseOver:function(n){this._Enabled&&(_$RVCommon.setButtonStyle(this._button.parentNode,this._hoverStyles,"pointer"),n.preventDefault())},_onButtonMouseOut:function(n){Sys.UI.DomElement.getVisible(this._menu)||(_$RVCommon.setButtonStyle(this._button.parentNode,this._normalStyles,"default"),n.preventDefault())},_onButtonClick:function(n){this._Enabled&&this._showMenu(!0),n.preventDefault()},_onButtonKeyDown:function(n){n.keyCode==Sys.UI.Key.space&&(this._onButtonClick(n),n.preventDefault())},_isMenuVisible:function(){return this._menu&&Sys.UI.DomElement.getVisible(this._menu)},_showMenu:function(){this._isMenuVisible()||(Sys.UI.DomElement.setVisible(this._menu,!0),this._adorner.style.height=this._menu.clientHeight+"px",this._isRTL()&&(this._adorner.style.left=this._menu.clientWidth-24+"px"),this._ensureIsOnScreen(this._menu,this._button),this._selectMenuItem(this._menuItemElements[0]),$addHandler(document,"mousedown",this._hideMenuDelegate),$addHandler(document,"keydown",this._keyDownDelegate))},_ensureIsOnScreen:function(n,t){var u,f;n.style.left="",n.style.right="";var i=_$RVCommon.getBounds(n),e=_$RVCommon.getBounds(t),r=t.getBoundingClientRect().left;this._isRTL()?r<i.width&&(n.style.right=r-i.width+e.width+"px"):(u=_$RVCommon.windowRect(),f=r+i.width,f>u.clientWidth&&(n.style.left=u.clientWidth-f+"px"))},_hideMenu:function(n){this._isMenuVisible()&&(n==null||n.target!=this._selectedItem)&&(Sys.UI.DomElement.setVisible(this._menu,!1),$removeHandler(document,"mousedown",this._hideMenuDelegate),$removeHandler(document,"keydown",this._keyDownDelegate),_$RVCommon.setButtonStyle(this._button.parentNode,this._normalStyles,"default"))},_onMenuKeyDown:function(n){var t=Array.indexOf(this._menuItemElements,this._selectedItem);t!=-1&&(n.keyCode==Sys.UI.Key.down||n.keyCode==Sys.UI.Key.left?(t=t<this._menuItemElements.length-1?t+1:0,this._selectMenuItem(this._menuItemElements[t])):n.keyCode==Sys.UI.Key.up||n.keyCode==Sys.UI.Key.right?(t=t>0?t-1:this._menuItemElements.length-1,this._selectMenuItem(this._menuItemElements[t])):n.keyCode==Sys.UI.Key.esc||n.keyCode==Sys.UI.Key.tab?this._hideMenu():n.keyCode==Sys.UI.Key.enter&&this._menuItemElements[t].click()),n.preventDefault()},_onMenuItemClick:function(){this._hideMenu(null)},_onMenuItemMouseOver:function(n){n.target&&n.target.tagName&&n.target.tagName.toUpperCase()=="A"&&this._selectMenuItem(n.target),n.preventDefault()},_selectMenuItem:function(n){if(n&&n.focus(),this._selectedItem!=n){if(this._selectedItem=null,n){if(_$RVCommon.setButtonStyle(n.parentNode,this._hoverStyles,"pointer"),n._selected=!0,n.style.display!=="none")try{n.focus()}catch(i){}this._selectedItem=n}for(var t=0;t<this._menuItemElements.length;t++)this._menuItemElements[t]!=n&&(this._menuItemElements[t]._selected||typeof this._menuItemElements[t]._selected=="undefined")&&(_$RVCommon.setButtonStyle(this._menuItemElements[t].parentNode,this._normalStyles,"default"),this._menuItemElements[t]._selected=!1)}},_isRTL:function(){var n=this.get_element();return Microsoft.Reporting.WebFormsClient._InternalReportViewer.GetRTLDirection?Microsoft.Reporting.WebFormsClient._InternalReportViewer.GetRTLDirection(n)=="rtl":!1}},Microsoft.Reporting.WebFormsClient._DropDownMenu.registerClass("Microsoft.Reporting.WebFormsClient._DropDownMenu",Sys.UI.Control);