Type.registerNamespace("Microsoft.Reporting.WebFormsClient"),Microsoft.Reporting.WebFormsClient._Toolbar=function(n){Microsoft.Reporting.WebFormsClient._Toolbar.initializeBase(this,[n]),this.m_reportViewer=null,this.m_onReportViewerLoadingChangedDelegate=Function.createDelegate(this,this.OnReportViewerLoadingChanged),this.m_onReportAreaContentChangedDelegate=Function.createDelegate(this,this.OnReportAreaContentChanged),this.CurrentPage=0,this.TotalPages=0,this.IsEstimatePageCount=!0,this.m_currentPageTextBox=null,this.m_totalPagesLabel=null,this.m_firstPageNavButton=null,this.m_prevPageNavButton=null,this.m_nextPageNavButton=null,this.m_lastPageNavButton=null,this.InvalidPageNumberMessage=null,this.OnCurrentPageClick=null,this.IsDrillthroughReport=!1,this.m_drillBackButton=null,this.m_refreshButton=null,this.m_onRefreshClickDelegate=Function.createDelegate(this,this.OnRefreshClick),this.m_zoomDropDown=null,this.m_zoomSelectionChangeDelegate=Function.createDelegate(this,this.OnZoomSelectionChanged),this.m_externalZoomChangeDelegate=Function.createDelegate(this,this.OnZoomChangedExternal),this.m_findTextBox=null,this.m_findButton=null,this.m_findNextButton=null,this.CanFindNext=!1,this.FindTextBoxPollInterval=null,this.m_onFindTextChangeDelegate=Function.createDelegate(this,this.OnFindTextChanged),this.m_onFindTextFocusDelegate=Function.createDelegate(this,this.OnFindTextFocus),this.m_onFindTextBlurDelegate=Function.createDelegate(this,this.OnFindTextBlur),this.m_enableDisableFindButtonsDelegate=Function.createDelegate(this,this.CheckEnableDisableFindButtons),this.m_onFindClickDelegate=Function.createDelegate(this,this.OnFindClick),this.m_onFindNextClickDelegate=Function.createDelegate(this,this.OnFindNextClick),this.m_exportButton=null,this.m_printButton=null,this.m_onPrintClickDelegate=Function.createDelegate(this,this.OnPrintClick),this.m_atomDataFeedButton=null,this.m_onAtomDataFeedClickDelegate=Function.createDelegate(this,this.OnAtomDataFeedClick),this.m_isFirstEnable=!0},Microsoft.Reporting.WebFormsClient._Toolbar.prototype={initialize:function(){Microsoft.Reporting.WebFormsClient._Toolbar.callBaseMethod(this,"initialize"),this.m_reportViewer.add_propertyChanged(this.m_onReportViewerLoadingChangedDelegate),this.m_reportViewer.add_propertyChanged(this.m_onReportAreaContentChangedDelegate),this.m_zoomDropDown!=null&&(this.m_zoomDropDown.name=null)},dispose:function(){this.FindTextBoxPollInterval!=null&&clearInterval(this.FindTextBoxPollInterval),Microsoft.Reporting.WebFormsClient._Toolbar.callBaseMethod(this,"dispose"),this.m_reportViewer!=null&&(this.m_reportViewer.remove_propertyChanged(this.m_onReportViewerLoadingChangedDelegate),this.m_reportViewer.remove_propertyChanged(this.m_onReportAreaContentChangedDelegate),this.m_reportViewer.remove_propertyChanged(this.m_externalZoomChangeDelegate)),this.m_currentPageTextBox!=null&&($clearHandlers(this.m_currentPageTextBox),this.m_currentPageTextBox=null,this.m_totalPagesLabel=null,this.m_firstPageNavButton=null,this.m_prevPageNavButton=null,this.m_nextPageNavButton=null,this.m_lastPageNavButton=null),this.m_findTextBox!=null&&($clearHandlers(this.m_findTextBox),this.m_findTextBox=null,this.m_findButton=null,this.m_findNextButton=null),this.m_drillBackButton=null,this.m_zoomDropDown=null,this.m_refreshButton=null,this.m_exportButton=null,this.m_printButton=null,this.m_atomDataFeedButton=null,this.m_onFindTextChangeDelegate!=null&&(delete this.m_onFindTextChangeDelegate,this.m_onFindTextChangeDelegate=null,delete this.m_onFindTextFocusDelegate,this.m_onFindTextFocusDelegate=null,delete this.m_onFindTextBlurDelegate,this.m_onFindTextBlurDelegate=null,delete this.m_enableDisableFindButtonsDelegate,this.m_enableDisableFindButtonsDelegate=null,delete this.m_onFindClickDelegate,this.m_onFindClickDelegate=null,delete this.m_onFindNextClickDelegate,this.m_onFindNextClickDelegate=null,delete this.m_zoomSelectionChangeDelegate,this.m_zoomSelectionChangeDelegate=null,delete this.m_externalZoomChangeDelegate,this.m_externalZoomChangeDelegate=null,delete this.m_onPrintClickDelegate,this.m_onPrintClickDelegate=null,delete this.m_onAtomDataFeedClickDelegate,this.m_onAtomDataFeedClickDelegate=null,delete this.m_onRefreshClickDelegate,this.m_onRefreshClickDelegate=null,delete this.m_onReportViewerLoadingChangedDelegate,this.m_onReportViewerLoadingChangedDelegate=null,delete this.m_onReportAreaContentChangedDelegate,this.m_onReportAreaContentChangedDelegate=null)},set_CurrentPageTextBox:function(n){this.m_currentPageTextBox=n},get_CurrentPageTextBox:function(){return this.m_currentPageTextBox},set_TotalPagesLabel:function(n){this.m_totalPagesLabel=n},get_TotalPagesLabel:function(){return this.m_totalPagesLabel},set_FirstPageNavButton:function(n){this.m_firstPageNavButton=n},get_FirstPageNavButton:function(){return this.m_firstPageNavButton},set_PrevPageNavButton:function(n){this.m_prevPageNavButton=n},get_PrevPageNavButton:function(){return this.m_prevPageNavButton},set_NextPageNavButton:function(n){this.m_nextPageNavButton=n},get_NextPageNavButton:function(){return this.m_nextPageNavButton},set_LastPageNavButton:function(n){this.m_lastPageNavButton=n},get_LastPageNavButton:function(){return this.m_lastPageNavButton},set_FindTextBox:function(n){this.m_findTextBox=n},get_FindTextBox:function(){return this.m_findTextBox},set_FindButton:function(n){this.m_findButton=n},get_FindButton:function(){return this.m_findButton},set_FindNextButton:function(n){this.m_findNextButton=n},get_FindNextButton:function(){return this.m_findNextButton},set_ZoomDropDown:function(n){this.m_zoomDropDown=n},get_ZoomDropDown:function(){return this.m_zoomDropDown},set_RefreshButton:function(n){this.m_refreshButton=n},get_RefreshButton:function(){return this.m_refreshButton},set_DrillBackButton:function(n){this.m_drillBackButton=n},get_DrillBackButton:function(){return this.m_drillBackButton},set_ExportButton:function(n){this.m_exportButton=n},get_ExportButton:function(){return this.m_exportButton},set_PrintButton:function(n){this.m_printButton=n},get_PrintButton:function(){return this.m_printButton},set_AtomDataFeedButton:function(n){this.m_atomDataFeedButton=n},get_AtomDataFeedButton:function(){return this.m_atomDataFeedButton},set_ReportViewer:function(n){this.m_reportViewer=n},ConnectEventHandlers:function(){this.m_currentPageTextBox!=null&&$addHandlers(this.m_currentPageTextBox,{keypress:this.OnCurrentPageKeyPress},this),this.m_findTextBox!=null&&(typeof this.m_findTextBox.onpropertychange!="undefined"?this.m_findTextBox.onpropertychange=this.m_onFindTextChangeDelegate:(this.m_findTextBox.onfocus=this.m_onFindTextFocusDelegate,this.m_findTextBox.onblur=this.m_onFindTextBlurDelegate),$addHandlers(this.m_findTextBox,{keypress:this.OnFindTextKeyPress},this),this.m_findButton.control.OnClickScript=this.m_onFindClickDelegate,this.m_findNextButton.control.OnClickScript=this.m_onFindNextClickDelegate),this.m_zoomDropDown!=null&&(this.m_zoomDropDown.onchange=this.m_zoomSelectionChangeDelegate,this.m_reportViewer.add_propertyChanged(this.m_externalZoomChangeDelegate)),this.m_printButton!=null&&this.m_printButton.control.SetOnClickHandler(!0,this.m_onPrintClickDelegate),this.m_atomDataFeedButton!=null&&this.m_atomDataFeedButton.control.SetOnClickHandler(!0,this.m_onAtomDataFeedClickDelegate),this.m_refreshButton!=null&&this.m_refreshButton.control.SetOnClickHandler(!0,this.m_onRefreshClickDelegate)},OnReportViewerLoadingChanged:function(n,t){if(t.get_propertyName()=="isLoading"){var i=this.m_reportViewer.get_isLoading();this.EnableDisable(!i)}},OnReportAreaContentChanged:function(n,t){if(t.get_propertyName()=="reportAreaContentType"){var i=this.m_reportViewer._get_toolBarUpdate();i!=null&&this.UpdateForNewReportPage(i)}},EnableDisable:function(n){var i,u;if(n&&this.m_isFirstEnable&&(this.ConnectEventHandlers(),this.m_isFirstEnable=!1),!n||!Microsoft.Reporting.WebFormsClient._ReportAreaAsyncLoadTarget.AsyncTriggerSelected){i=Microsoft.Reporting.WebFormsClient.ReportAreaContent.None,n&&(i=this.m_reportViewer.get_reportAreaContentType());var t=i==Microsoft.Reporting.WebFormsClient.ReportAreaContent.ReportPage,r=!this.m_reportViewer.get_isLoading()&&i==Microsoft.Reporting.WebFormsClient.ReportAreaContent.None,s=(n||r)&&this.IsDrillthroughReport;this.EnableDisableImage(this.m_drillBackButton,s),u=n&&(t||i==Microsoft.Reporting.WebFormsClient.ReportAreaContent.Error)||r,this.EnableDisableImage(this.m_refreshButton,u);var f=i==Microsoft.Reporting.WebFormsClient.ReportAreaContent.ReportPage,e=f&&this.CurrentPage>1,o=f&&(this.CurrentPage<this.TotalPages||this.IsEstimatePageCount);this.EnableDisableWebControl(this.m_currentPageTextBox,t),this.EnableDisableImage(this.m_firstPageNavButton,t&&e),this.EnableDisableImage(this.m_prevPageNavButton,t&&e),this.EnableDisableImage(this.m_nextPageNavButton,t&&o),this.EnableDisableImage(this.m_lastPageNavButton,t&&o),this.EnableDisableWebControl(this.m_zoomDropDown,t),this.EnableDisableWebControl(this.m_findTextBox,t),this.EnableDisableFindButtons(t),this.EnableDisableExportButton(t),this.EnableDisableImage(this.m_printButton,t),this.EnableDisableImage(this.m_atomDataFeedButton,t)}},UpdateForNewReportPage:function(n){this.CurrentPage=n.CurrentPage,this.TotalPages=n.TotalPages,this.IsEstimatePageCount=n.IsEstimatePageCount,this.m_currentPageTextBox!=null&&(this.m_currentPageTextBox.value=this.CurrentPage),this.m_totalPagesLabel!=null&&(this.m_totalPagesLabel.innerHTML=n.TotalPagesString),this.SetUIToCurrentZoomLevel(),this.m_findTextBox!=null&&(this.m_findTextBox.value=n.SearchText),this.CanFindNext=n.CanFindNext,this.EnableDisable(!0)},EnableDisableFindButtons:function(n){if(this.m_findTextBox!=null){var t=this.m_findTextBox,i=t!=null&&t.value!=null&&t.value!="";this.EnableDisableTextButton(this.m_findButton,n&&i),this.EnableDisableTextButton(this.m_findNextButton,n&&this.CanFindNext)}},EnableDisableExportButton:function(n){this.EnableDisableTextButton(this.m_exportButton,n)},EnableDisableWebControl:function(n,t){n!=null&&(n.disabled=t?null:"disabled")},EnableDisableImage:function(n,t){n!=null&&n.control!=null&&(n.control.ShowImage(t),n.disabled=t?null:"disabled")},EnableDisableTextButton:function(n,t){n!=null&&n.control!=null&&n.control.SetActive(t)},OnFindClick:function(){var n=this.m_findTextBox.value;this.m_reportViewer.find(n)},OnFindNextClick:function(){this.m_reportViewer.findNext()},OnFindTextChanged:function(){event.propertyName=="value"&&(this.CanFindNext=!1,this.EnableDisableFindButtons(!0))},OnFindTextFocus:function(){this.FindTextBoxPollInterval=setInterval(this.m_enableDisableFindButtonsDelegate,250)},OnFindTextBlur:function(){clearInterval(this.FindTextBoxPollInterval),this.EnableDisableFindButtons(!0)},OnFindTextKeyPress:function(n){(n.charCode==10||n.charCode==13)&&(this.OnFindClick(),n.preventDefault())},OnCurrentPageKeyPress:function(n){if(n.charCode==10||n.charCode==13){var t=parseInt(this.m_currentPageTextBox.value,10);isNaN(t)||t<1||t>this.TotalPages&&!this.IsEstimatePageCount?alert(this.InvalidPageNumberMessage):this.OnCurrentPageClick(),n.preventDefault()}},CheckEnableDisableFindButtons:function(){this.EnableDisableFindButtons(!0)},OnZoomSelectionChanged:function(){this.m_reportViewer.set_zoomLevel(this.m_zoomDropDown.value)},OnZoomChangedExternal:function(n,t){t.get_propertyName()=="zoomLevel"&&this.SetUIToCurrentZoomLevel()},SetUIToCurrentZoomLevel:function(){var n=this.m_zoomDropDown,i,r,t,u;if(n!=null){for(i=this.m_reportViewer.get_zoomLevel(),r=n.options,t=0;t<r.length;t++)if(r(t).value==i){n.selectedIndex!=t&&(n.selectedIndex=t);return}u=document.createElement("option"),u.text=escape(i)+"%",u.value=i,n.add(u),n.selectedIndex=r.length-1}},OnPrintClick:function(){this.m_reportViewer.invokePrintDialog()},OnAtomDataFeedClick:function(){this.m_reportViewer.exportReport("ATOM")},OnRefreshClick:function(){this.m_reportViewer.refreshReport()}},Microsoft.Reporting.WebFormsClient._Toolbar.registerClass("Microsoft.Reporting.WebFormsClient._Toolbar",Sys.UI.Control);